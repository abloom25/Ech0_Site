---
title: OAuth2 集成
description: 本功能旨在配置第三方服务进行OAuth2登录。启用此功能后，您可以使用已有的第三方账户快速、安全地登录本系统，无需记忆用户名和密码。
---

import { Accordion, Accordions } from "fumadocs-ui/components/accordion";

### 配置前准备

在开始配置之前，您**必须**先在您的第三方服务提供商（GitHub、Google）的平台上创建一个 OAuth 应用，并获取以下关键信息：

1.  **Client ID**：应用的公开标识符。
2.  **Client Secret**：应用的私密密钥，用于验证应用身份。

---

### 配置项

请按照以下顺序，在系统的“OAuth2 设置”页面中填写或选择相应选项。

#### 启用 OAuth

- **描述**：此开关用于控制是否开启 OAuth2 登录功能。
- **操作**：将此开关设置为 **“开启”** 状态，以激活所有后续配置项。

#### OAuth2 模板

- **描述**：此选项用于预设不同 OAuth2 服务提供商的配置模板，可以自动填充大部分 URL。
- **操作**：从下拉菜单中选择您使用的服务， 目前仅有 GitHub 和 Google

#### Client ID

- **描述**：您在第三方平台创建 OAuth 应用后获得的 Client ID。
- **操作**：在文本框中准确输入您的 Client ID。

#### Client Secret

- **描述**：与 Client ID 对应的私密密钥。此信息极其敏感，请勿泄露。
- **操作**：在文本框中粘贴或输入您的 Client Secret。

#### Callback URL

- **描述**：用户授权后，第三方服务重定向回的地址。**此地址在选择 OAuth2 模板后自动生成，请勿修改**
- **操作**：复制此 URL，并在第三方平台的 OAuth 应用设置中将其填入“Authorization callback URL”字段。
- **示例**：`https://echo.example.cm/oauth/github/callback`

#### Scopes | 权限范围

- **描述**：定义了您的应用请求访问的用户数据范围。范围越小，用户越愿意授权。
- **操作**：根据需要填写。对于基本的登录功能，通常只需要读取用户基本信息的权限。
- **示例**：`read:user` (对于 GitHub，此权限足以获取用户公开信息)

---

### 配置完成与验证

所有信息填写完毕后，请点击“保存”或“应用”按钮。

1.  **测试登录**：退出当前账户（如果已登录），您应该在登录页面看到一个“通过 GitHub 登录”（或其他服务商名称）的按钮。
2.  **授权流程**：点击该按钮，系统会跳转到 GitHub 的授权页面。确认授权后，您应该会被重定向回本系统并成功登录。

- **如果成功**：说明配置无误。
- **如果失败**：请参考下方的“常见问题”进行排查。

---

### 常见问题 | FAQ

<Accordions type="multiple">
  <Accordion title="保存后点击登录按钮，页面跳转到GitHub，但提示“Redirect URI mismatch”（重定向URI不匹配）怎么办？">
    这是最常见的问题。请仔细检查： 1. 本系统“Callback URL”配置项中的值。 2.
    您在GitHub OAuth应用设置页面填写的“Authorization callback URL”。
    确保两者完全一致，然后重新保存并测试。
  </Accordion>

<Accordion title="授权后返回系统，提示“Invalid client”或“Authentication failed”怎么办？">
    这通常是认证信息错误。请检查：

    1.  `Client ID` 和 `Client Secret` 是否复制正确，注意有无多余的空格。
    2.  确认您的 OAuth 应用在 GitHub 上是否处于活跃状态。
</Accordion>

<Accordion title="我需要哪些 Scope 权限？">
仅请求您功能所必需的最小权限。对于用户登录，`read:user` (GitHub) 或 `openid` (Google) 通常就足够了。
</Accordion>
</Accordions>
